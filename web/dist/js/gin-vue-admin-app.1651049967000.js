/*! 
 Build Time : 1651049967000 */
var e=(e,l,a)=>new Promise(((t,u)=>{var o=e=>{try{s(a.next(e))}catch(l){u(l)}},d=e=>{try{s(a.throw(e))}catch(l){u(l)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,d);s((a=a.apply(e,l)).next())}));import{g as l,a,u as t,c as u}from"./gin-vue-admin-app.16510499670002.js";import{t as o}from"./gin-vue-admin-stringFun.1651049967000.js";import{_ as d,u as s,r as i,b as p,o as r,c as n,d as v,e as m,w as c,G as f,H as g,t as b,l as h,f as y,i as V,j as k,v as A}from"../gva/gin-vue-admin-index.1651049967000.js";const C={class:"gva-search-box"},_=V("查询"),w=V("重置"),S={class:"gva-table-box"},x={class:"gva-btn-list"},z=V("新增"),K=V("角色详情"),U=V("编辑"),I={class:"gva-pagination"},N={class:"vPicBox"},j={class:"vPic"},R=["src"],q={class:"dialog-footer"},$=V("取 消"),D=V("确 定"),F={name:"App"};var P=d(Object.assign(F,{setup(d){const V=s(),F=i({Name:"",AppKey:"",AppSecret:"",Status:"",Remark:"",validateCode:"",validateCodeId:""}),P=e=>{const l=B.value.filter((l=>l.value===e))[0];return l&&`${l.label}`},B=i([{value:!0,label:"启用",type:"success"},{value:!1,label:"禁用",type:"danger"}]),G=i(""),H=i({Name:[{required:!0,message:"请输入名称",trigger:"blur"}],AppKey:[{required:!0,message:"请输入AppKey",trigger:"blur"}],AppSecret:[{required:!0,message:"请输入AppSecret",trigger:"blur"}],Status:[{required:!0,message:"请选择状态",trigger:"blur"}],validateCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]}),O=i(1),E=i(0),J=i(10),L=i([]),M=i({}),Q=()=>{M.value={}},T=()=>{O.value=1,J.value=10,Z()},W=e=>{J.value=e,Z()},X=e=>{O.value=e,Z()},Y=({prop:e,order:l})=>{e&&("ID"===e&&(e="id"),M.value.orderKey=o(e),M.value.desc="descending"===l),Z()},Z=()=>e(this,null,(function*(){const e={};M.value.name&&(e[M.value.name]=["name"]),M.value.description&&(e[M.value.description]=["remark"]),M.value.status&&(e[M.value.status]=["status"]);const a=yield l({page:O.value,limit:J.value,search:e});200===a.code&&(L.value=a.data.docs,E.value=a.data.total,O.value=a.data.page,J.value=a.data.limit)}));Z();const ee=i(null),le=i("新增App"),ae=i(!1),te=e=>{switch(e){case"addApi":le.value="新增App";break;case"edit":le.value="编辑App"}G.value=e,ae.value=!0},ue=()=>{ee.value.resetFields(),F.value={Name:"",AppKey:"",AppSecret:"",Status:"",Remark:"",validateCode:"",validateCodeId:""},ae.value=!1},oe=l=>e(this,null,(function*(){const e=yield a({id:l.ID});F.value=e.data.app,te("edit")})),de=()=>e(this,null,(function*(){ee.value.validate((l=>e(this,null,(function*(){if(l)switch(G.value){case"addApp":200===(yield u(F.value)).code&&k({type:"success",message:"添加成功",showClose:!0}),Z(),ue();break;case"edit":200===(yield t(F.value)).code&&k({type:"success",message:"编辑成功",showClose:!0}),Z(),ue();break;default:k({type:"error",message:"未知操作",showClose:!0})}}))))})),se=i(""),ie=()=>{A({}).then((e=>{se.value=e.data.b64s,F.value.validateCodeId=e.data.key}))};ie();return(e,l)=>{const a=p("el-input"),t=p("el-form-item"),u=p("el-option"),o=p("el-select"),d=p("el-button"),s=p("el-form"),i=p("el-table-column"),k=p("el-table"),A=p("el-pagination"),Z=p("el-dialog");return r(),n("div",null,[v("div",C,[m(s,{ref:"searchForm",inline:!0,model:M.value},{default:c((()=>[m(t,{label:"名称"},{default:c((()=>[m(a,{modelValue:M.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>M.value.name=e),placeholder:"名称"},null,8,["modelValue"])])),_:1}),m(t,{label:"描述"},{default:c((()=>[m(a,{modelValue:M.value.description,"onUpdate:modelValue":l[1]||(l[1]=e=>M.value.description=e),placeholder:"描述"},null,8,["modelValue"])])),_:1}),m(t,{label:"状态"},{default:c((()=>[m(o,{modelValue:M.value.status,"onUpdate:modelValue":l[2]||(l[2]=e=>M.value.status=e),clearable:"",placeholder:"请选择"},{default:c((()=>[(r(!0),n(f,null,g(B.value,(e=>(r(),h(u,{key:e.value,label:`${e.label}(${e.value})`,value:e.value?"1":"0"},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(t,null,{default:c((()=>[m(d,{size:"small",type:"primary",icon:"search",onClick:T},{default:c((()=>[_])),_:1}),m(d,{size:"small",icon:"refresh",onClick:Q},{default:c((()=>[w])),_:1})])),_:1})])),_:1},8,["model"])]),v("div",S,[v("div",x,[m(d,{size:"small",type:"primary",icon:"plus",onClick:l[3]||(l[3]=e=>te("addApp"))},{default:c((()=>[z])),_:1})]),m(k,{data:L.value,onSortChange:Y,onSelectionChange:e.handleSelectionChange},{default:c((()=>[m(i,{type:"selection",width:"55"}),m(i,{align:"left",label:"id","min-width":"60",prop:"ID",sortable:"custom"}),m(i,{align:"left",label:"名称","min-width":"100",prop:"Name",sortable:"custom"}),m(i,{align:"left",label:"AppKey","min-width":"120",prop:"AppKey",sortable:"custom"}),m(i,{align:"left",label:"AppSecret","min-width":"200",prop:"AppSecret",sortable:"custom"}),m(i,{align:"left",label:"状态","min-width":"80",prop:"Status",sortable:"custom"},{default:c((e=>[v("div",null,b(P(e.row.Status)),1)])),_:1}),m(i,{align:"left",label:"备注","min-width":"150",prop:"Remark",sortable:"custom"}),m(i,{align:"left",fixed:"right",label:"操作",width:"200"},{default:c((e=>[m(d,{size:"small",icon:"document",type:"text",onClick:l=>{return a=e.row,void V.push({name:"appDetail",params:{id:a.AppKey}});var a}},{default:c((()=>[K])),_:2},1032,["onClick"]),m(d,{icon:"edit",size:"small",type:"text",onClick:l=>oe(e.row)},{default:c((()=>[U])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),v("div",I,[m(A,{"current-page":O.value,"page-size":J.value,"page-sizes":[10,30,50,100],total:E.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:X,onSizeChange:W},null,8,["current-page","page-size","total"])])]),m(Z,{modelValue:ae.value,"onUpdate:modelValue":l[11]||(l[11]=e=>ae.value=e),"before-close":ue,title:le.value},{footer:c((()=>[v("div",q,[m(d,{size:"small",onClick:ue},{default:c((()=>[$])),_:1}),m(d,{size:"small",type:"primary",onClick:de},{default:c((()=>[D])),_:1})])])),default:c((()=>[m(s,{ref_key:"apiForm",ref:ee,model:F.value,rules:H.value,"label-width":"90px"},{default:c((()=>[m(t,{label:"名称",prop:"Name"},{default:c((()=>[m(a,{modelValue:F.value.Name,"onUpdate:modelValue":l[4]||(l[4]=e=>F.value.Name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),"edit"===G.value?(r(),h(t,{key:0,label:"AppKey",prop:"AppKey"},{default:c((()=>[m(a,{modelValue:F.value.AppKey,"onUpdate:modelValue":l[5]||(l[5]=e=>F.value.AppKey=e),autocomplete:"off",disabled:""},null,8,["modelValue"])])),_:1})):y("",!0),"edit"===G.value?(r(),h(t,{key:1,label:"AppSecret",prop:"AppSecret"},{default:c((()=>[m(a,{modelValue:F.value.AppSecret,"onUpdate:modelValue":l[6]||(l[6]=e=>F.value.AppSecret=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})):y("",!0),"edit"===G.value?(r(),h(t,{key:2,label:"状态",prop:"Status"},{default:c((()=>[m(o,{modelValue:F.value.Status,"onUpdate:modelValue":l[7]||(l[7]=e=>F.value.Status=e),placeholder:"请选择",style:{width:"100%"}},{default:c((()=>[(r(!0),n(f,null,g(B.value,(e=>(r(),h(u,{key:e.value,label:`${e.label}(${e.value})`,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):y("",!0),m(t,{label:"描述",prop:"Remark"},{default:c((()=>[m(a,{modelValue:F.value.Remark,"onUpdate:modelValue":l[8]||(l[8]=e=>F.value.Remark=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),"addApp"===G.value?(r(),h(t,{key:3,label:"验证码",prop:"validateCode"},{default:c((()=>[v("div",N,[m(a,{modelValue:F.value.validateCode,"onUpdate:modelValue":l[9]||(l[9]=e=>F.value.validateCode=e),style:{width:"60%"},placeholder:"请输入验证码","show-password":""},null,8,["modelValue"]),v("div",j,[se.value?(r(),n("img",{key:0,src:se.value,alt:"请输入验证码",onClick:l[10]||(l[10]=e=>ie())},null,8,R)):y("",!0)])])])),_:1})):y("",!0)])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-9ef9b52c"]]);export{P as default};
