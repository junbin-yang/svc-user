/*! 
 Build Time : 1651049967000 */
var e=(e,l,a)=>new Promise(((r,o)=>{var s=e=>{try{t(a.next(e))}catch(l){o(l)}},d=e=>{try{t(a.throw(e))}catch(l){o(l)}},t=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,d);t((a=a.apply(e,l)).next())}));import{_ as l,r as a,a as r,k as o,b as s,o as d,c as t,d as i,t as u,l as n,w as p,g as c,m,f as v,e as g,p as _,q as f,v as y,x as w,y as b,z as C,n as k,i as V,j as h,A as U,B as I,C as z}from"../gva/gin-vue-admin-index.1651049967000.js";import x from"./gin-vue-admin-bottomInfo.1651049967000.js";import{m as q}from"./gin-vue-admin-md5.1651049967000.js";const A=e=>(_("data-v-ee0c9818"),e=e(),f(),e),N={id:"userLayout"},P={class:"login_panle"},E={class:"login_panle_form"},Z={class:"login_panle_form_title"},j=["src"],L={class:"login_panle_form_title_p"},F={class:"input-icon"},T={class:"input-icon"},$={class:"vPicBox"},B={class:"vPic"},D=["src"],G=V("登 录"),K=V("注册用户"),M=V("忘记密码"),O=V("注册"),H=V("返回"),J=V("确定"),Q=V("返回"),R=A((()=>i("div",{class:"login_panle_right"},null,-1))),S={class:"login_panle_foot"},W={class:"copyright"},X={name:"Login"};var Y=l(Object.assign(X,{setup(l){const _=a("login"),f=e=>{_.value=e},V=(e,l,a)=>{if(l.length<4)return a(new Error("请输入正确的用户名"));a()},A=()=>{y({}).then((e=>{le.value=e.data.b64s,ae.validateCodeId=e.data.key}))};A();const X=a("lock"),Y=()=>{X.value="lock"===X.value?"unlock":"lock"},ee=a(null),le=a(""),ae=r({account:"root",password:"",validateCode:"",validateCodeId:""}),re=r({account:[{validator:V,trigger:"blur"}],password:[{validator:(e,l,a)=>{if(l.length<6)return a(new Error("请输入正确的密码"));a()},trigger:"blur"}],validateCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{message:"验证码格式不正确",trigger:"blur"}]}),oe=o(),se=()=>e(this,null,(function*(){return ae.password=q(ae.password),yield oe.LoginIn({loginType:"account",loginValue:ae.account,password:ae.password,validateCodeId:ae.validateCodeId,validateCode:ae.validateCode})})),de=()=>{ee.value.validate((l=>e(this,null,(function*(){if(!l)return h({type:"error",message:"请正确填写登录信息",showClose:!0}),A(),!1;(yield se())||A()}))))},te=a(!1),ie=a(!1),ue=a(!1),ne=a(null),pe=r({invitationCode:"",account:"",password:"",password_ck:"",nickName:"",mobile:"",email:"",validateCode:"",validateCodeId:"0"}),ce=(e,l,a)=>{var r="";if("registerUser"===_.value?r=pe.password:"retrievePass"===_.value&&(r=be.password),l!==r)return a(new Error("两次输入密码不一致"));a()},me=(e,l,a)=>{if(!0!==/(?=.*\d)(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{6,30}/.test(l))return a(new Error("必须是大写字母,小写字母,数字,特殊字符组成,且长度为6到30位"));a()},ve=(e,l,a)=>{const r=/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!l)return a(new Error("邮箱不能为空"));setTimeout((()=>{r.test(l)?a():a(new Error("请输入正确的邮箱格式"))}),100)},ge=r({invitationCode:[{required:!0,message:"请输入邀请码",trigger:"blur"}],account:[{required:!0,validator:V,trigger:"blur"}],password:[{required:!0,validator:me,trigger:"blur"}],password_ck:[{required:!0,validator:ce,trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}],mobile:[{required:!0,validator:(e,l,a)=>{const r=/^(1[3456789]\d{9})$/;if(!l)return a(new Error("手机号不能为空"));setTimeout((()=>{r.test(l)?a():a(new Error("请输入正确的手机号格式"))}),100)},trigger:"blur"}],email:[{required:!0,validator:ve,trigger:"blur"}],validateCode:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}]}),_e=()=>e(this,null,(function*(){if(ie.value>0)return!1;const e=/^([a-zA-Z0-9._-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;var l=!1;if("registerUser"===_.value?l=e.test(pe.email):"retrievePass"===_.value&&(l=e.test(be.email)),!l)return h({type:"error",message:"邮箱格式错误",showClose:!0}),!1;ue.value=!0,te.value=!0,ie.value=30;var a=setInterval((function(){ie.value>0?ie.value--:(clearInterval(a),ue.value=!1)}),1e3);if("registerUser"===_.value){const e=yield U({email:pe.email,invitationCode:pe.invitationCode});200===e.code&&(pe.validateCodeId=e.data.key,h({type:"success",message:"验证码发送成功"}))}else if("retrievePass"===_.value){const e=yield U({email:be.email});200===e.code&&(be.validateCodeId=e.data.key,h({type:"success",message:"验证码发送成功"}))}})),fe=()=>ie.value>0?"已发送":0===ie.value?(te.value=!1,"重新发送验证码"):!1===ie.value?"发送验证码":void 0,ye=()=>{ne.value.validate((l=>e(this,null,(function*(){if(!l)return h({type:"error",message:"请正确填写登录信息",showClose:!0}),!1;{const e=yield I(pe);200===e.code&&(h({type:"success",message:e.message}),Ve(),f("login"))}}))))},we=a(null),be=r({password:"",password_ck:"",email:"",validateCode:"",validateCodeId:"0"}),Ce=r({password:[{required:!0,validator:me,trigger:"blur"}],password_ck:[{required:!0,validator:ce,trigger:"blur"}],email:[{required:!0,validator:ve,trigger:"blur"}],validateCode:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}]}),ke=()=>{we.value.validate((l=>e(this,null,(function*(){if(!l)return h({type:"error",message:"请正确填写用户信息",showClose:!0}),!1;{const e=yield z(be);200===e.code&&(h({type:"success",message:e.message}),Ve(),f("login"))}}))))},Ve=()=>{"registerUser"===_.value?(pe.invitationCode="",pe.account="",pe.password="",pe.password_ck="",pe.nickName="",pe.mobile="",pe.email="",pe.validateCode="",pe.validateCodeId="0"):"retrievePass"===_.value&&(be.password="",be.password_ck="",be.email="",be.validateCode="",be.validateCodeId="0")};return(e,l)=>{const a=s("user"),r=s("el-icon"),o=s("el-input"),y=s("el-form-item"),V=s("el-button"),h=s("el-form");return d(),t("div",N,[i("div",P,[i("div",E,[i("div",Z,[i("img",{class:"login_panle_form_title_logo",src:e.$GIN_VUE_ADMIN.appLogo,alt:""},null,8,j),i("p",L,u(e.$GIN_VUE_ADMIN.appName),1)]),"login"===_.value?(d(),n(h,{key:0,ref_key:"loginForm",ref:ee,model:c(ae),rules:c(re),onKeyup:m(de,["enter"])},{default:p((()=>[g(y,{prop:"account"},{default:p((()=>[g(o,{modelValue:c(ae).account,"onUpdate:modelValue":l[0]||(l[0]=e=>c(ae).account=e),placeholder:"请输入账号"},{suffix:p((()=>[i("span",F,[g(r,null,{default:p((()=>[g(a)])),_:1})])])),_:1},8,["modelValue"])])),_:1}),g(y,{prop:"password"},{default:p((()=>[g(o,{modelValue:c(ae).password,"onUpdate:modelValue":l[1]||(l[1]=e=>c(ae).password=e),type:"lock"===X.value?"password":"text",placeholder:"请输入密码"},{suffix:p((()=>[i("span",T,[g(r,null,{default:p((()=>[(d(),n(w(X.value),{onClick:Y}))])),_:1})])])),_:1},8,["modelValue","type"])])),_:1}),g(y,{prop:"validateCode"},{default:p((()=>[i("div",$,[g(o,{modelValue:c(ae).validateCode,"onUpdate:modelValue":l[2]||(l[2]=e=>c(ae).validateCode=e),placeholder:"请输入验证码",style:{width:"60%"}},null,8,["modelValue"]),i("div",B,[le.value?(d(),t("img",{key:0,src:le.value,alt:"请输入验证码",onClick:l[3]||(l[3]=e=>A())},null,8,D)):v("",!0)])])])),_:1}),g(y,null,{default:p((()=>[g(V,{type:"primary",size:"large",style:{width:"100%"},onClick:de},{default:p((()=>[G])),_:1})])),_:1}),g(y,null,{default:p((()=>[g(V,{size:"large",style:{width:"46%"},plain:"",onClick:l[4]||(l[4]=e=>f("registerUser"))},{default:p((()=>[K])),_:1}),g(V,{size:"large",style:{width:"46%","margin-left":"8%"},plain:"",onClick:l[5]||(l[5]=e=>f("retrievePass"))},{default:p((()=>[M])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])):v("",!0),"registerUser"===_.value?(d(),n(h,{key:1,ref_key:"registerForm",ref:ne,model:c(pe),rules:c(ge),"label-width":"80px"},{default:p((()=>[g(y,{label:"邀请码",prop:"invitationCode"},{default:p((()=>[g(o,{modelValue:c(pe).invitationCode,"onUpdate:modelValue":l[6]||(l[6]=e=>c(pe).invitationCode=e),placeholder:"请输入邀请码",clearable:""},null,8,["modelValue"])])),_:1}),g(y,{label:"账号",prop:"account"},{default:p((()=>[g(o,{modelValue:c(pe).account,"onUpdate:modelValue":l[7]||(l[7]=e=>c(pe).account=e),placeholder:"请输入账号",clearable:""},null,8,["modelValue"])])),_:1}),g(y,{label:"密码",prop:"password"},{default:p((()=>[g(o,{modelValue:c(pe).password,"onUpdate:modelValue":l[8]||(l[8]=e=>c(pe).password=e),type:"lock"===X.value?"password":"text",placeholder:"请输入密码",clearable:""},null,8,["modelValue","type"])])),_:1}),g(y,{label:"确认密码",prop:"password_ck"},{default:p((()=>[g(o,{modelValue:c(pe).password_ck,"onUpdate:modelValue":l[9]||(l[9]=e=>c(pe).password_ck=e),type:"lock"===X.value?"password":"text",placeholder:"请再次输入密码",clearable:""},null,8,["modelValue","type"])])),_:1}),g(y,{label:"用户昵称",prop:"nickName"},{default:p((()=>[g(o,{modelValue:c(pe).nickName,"onUpdate:modelValue":l[10]||(l[10]=e=>c(pe).nickName=e),placeholder:"请输入昵称",clearable:""},null,8,["modelValue"])])),_:1}),g(y,{label:"手机号",prop:"mobile"},{default:p((()=>[g(o,{modelValue:c(pe).mobile,"onUpdate:modelValue":l[11]||(l[11]=e=>c(pe).mobile=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1}),g(y,{label:"邮箱地址",prop:"email"},{default:p((()=>[g(o,{modelValue:c(pe).email,"onUpdate:modelValue":l[12]||(l[12]=e=>c(pe).email=e),placeholder:"请输入邮箱地址",clearable:""},null,8,["modelValue"])])),_:1}),g(y,{label:"验证码",prop:"validateCode"},{default:p((()=>[g(o,{modelValue:c(pe).validateCode,"onUpdate:modelValue":l[13]||(l[13]=e=>c(pe).validateCode=e),placeholder:"请输入邮箱验证码",style:{width:"46%"},clearable:""},null,8,["modelValue"]),g(V,{size:"large",style:{width:"46%","margin-left":"8%"},type:"success",class:k({gray:ie.value>0}),disabled:ue.value,onClick:l[14]||(l[14]=e=>_e())},{default:p((()=>[b(i("span",{class:k({num:ie.value>0})},u(ie.value+"s"),3),[[C,te.value]]),i("span",{class:k({gray_span:ie.value>0})},u(fe()),3)])),_:1},8,["class","disabled"])])),_:1}),g(y,null,{default:p((()=>[g(V,{size:"large",style:{width:"46%"},type:"primary",plain:"",onClick:ye},{default:p((()=>[O])),_:1}),g(V,{size:"large",style:{width:"46%","margin-left":"8%"},type:"primary",plain:"",onClick:l[15]||(l[15]=e=>f("login"))},{default:p((()=>[H])),_:1})])),_:1})])),_:1},8,["model","rules"])):v("",!0),"retrievePass"===_.value?(d(),n(h,{key:2,ref_key:"retrievePasswordForm",ref:we,model:c(be),rules:c(Ce),"label-width":"80px"},{default:p((()=>[g(y,{label:"邮箱地址",prop:"email"},{default:p((()=>[g(o,{modelValue:c(be).email,"onUpdate:modelValue":l[16]||(l[16]=e=>c(be).email=e),placeholder:"请输入邮箱地址",clearable:""},null,8,["modelValue"])])),_:1}),g(y,{label:"密码",prop:"password"},{default:p((()=>[g(o,{modelValue:c(be).password,"onUpdate:modelValue":l[17]||(l[17]=e=>c(be).password=e),type:"lock"===X.value?"password":"text",placeholder:"请输入新密码",clearable:""},null,8,["modelValue","type"])])),_:1}),g(y,{label:"确认密码",prop:"password_ck"},{default:p((()=>[g(o,{modelValue:c(be).password_ck,"onUpdate:modelValue":l[18]||(l[18]=e=>c(be).password_ck=e),type:"lock"===X.value?"password":"text",placeholder:"请再次输新入密码",clearable:""},null,8,["modelValue","type"])])),_:1}),g(y,{label:"验证码",prop:"validateCode"},{default:p((()=>[g(o,{modelValue:c(be).validateCode,"onUpdate:modelValue":l[19]||(l[19]=e=>c(be).validateCode=e),placeholder:"请输入邮箱验证码",style:{width:"46%"},clearable:""},null,8,["modelValue"]),g(V,{size:"large",style:{width:"46%","margin-left":"8%"},type:"success",class:k({gray:ie.value>0}),disabled:ue.value,onClick:l[20]||(l[20]=e=>_e())},{default:p((()=>[b(i("span",{class:k({num:ie.value>0})},u(ie.value+"s"),3),[[C,te.value]]),i("span",{class:k({gray_span:ie.value>0})},u(fe()),3)])),_:1},8,["class","disabled"])])),_:1}),g(y,null,{default:p((()=>[g(V,{size:"large",style:{width:"46%"},type:"primary",plain:"",onClick:ke},{default:p((()=>[J])),_:1}),g(V,{size:"large",style:{width:"46%","margin-left":"8%"},type:"primary",plain:"",onClick:l[21]||(l[21]=e=>f("login"))},{default:p((()=>[Q])),_:1})])),_:1})])),_:1},8,["model","rules"])):v("",!0)]),R,i("div",S,[i("div",W,[g(x)])])])])}}}),[["__scopeId","data-v-ee0c9818"]]);export{Y as default};
