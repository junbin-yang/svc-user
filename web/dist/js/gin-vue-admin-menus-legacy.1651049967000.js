/*! 
 Build Time : 1651049967000 */
!function(){function e(e,t,n,r,a,u,o){try{var c=e[u](o),i=c.value}catch(l){return void n(l)}c.done?t(i):Promise.resolve(i).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(a,u){var o=t.apply(n,r);function c(t){e(o,a,u,c,i,"next",t)}function i(t){e(o,a,u,c,i,"throw",t)}c(void 0)}))}}var n=document.createElement("style");n.innerHTML=".custom-tree-node span+span{margin-left:12px}\n",document.head.appendChild(n),System.register(["../gva/gin-vue-admin-index-legacy.1651049967000.js","./gin-vue-admin-authority-legacy.16510499670002.js","./gin-vue-admin-authorityBtn-legacy.1651049967000.js"],(function(e){"use strict";var n,r,a,u,o,c,i,l,s,d,f,m,p,v,h,y,g,w,k;return{setters:[function(e){n=e.r,r=e.b,a=e.o,u=e.c,o=e.d,c=e.e,i=e.w,l=e.t,s=e.R,d=e.i,f=e.f,m=e.a7,p=e.a8,v=e.j,h=e.a9,y=e.W},function(e){g=e.u},function(e){w=e.g,k=e.s}],execute:function(){var x={class:"clearflex"},I=d("确 定"),R={class:"custom-tree-node"},b={key:0},C=d(" 分配按钮 "),_={class:"dialog-footer"},D=d("取 消"),j=d("确 定"),z={name:"Menus"};e("default",Object.assign(z,{props:{row:{default:function(){return{}},type:Object}},emits:["changeRow"],setup:function(e,z){var N=z.expose,E=z.emit,A=e,B=n([]),S=n([]),T=n(!1),V=n({children:"children",label:function(e){return e.meta.title}}),M=function(){var e=t(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return t=e.sent,B.value=t.data.menus,e.next=6,p({authorityId:A.row.authorityId});case 6:n=e.sent,r=n.data.menus,a=[],r.forEach((function(e){r.some((function(t){return t.parentId===e.menuId}))||a.push(Number(e.menuId))})),S.value=a;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();M();var O=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({authorityId:A.row.authorityId,AuthorityName:A.row.authorityName,parentId:A.row.parentId,defaultRouter:t.name});case 2:0===(n=e.sent).code&&(v({type:"success",message:"设置成功"}),E("changeRow","defaultRouter",n.data.authority.defaultRouter));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){T.value=!0},H=n(null),L=function(){var e=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.value.getCheckedNodes(!1,!0),e.next=3,h({menus:t,authorityId:A.row.authorityId});case 3:0===e.sent.code&&v({type:"success",message:"菜单设置成功!"});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();N({enterAndNext:function(){L()},needConfirm:T});var U=n(!1),W=n([]),q=n([]),F=n(),G="",J=function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G=t.ID,e.next=3,w({menuID:G,authorityId:A.row.authorityId});case 3:if(0!==(n=e.sent).code){e.next=9;break}return Q(t),e.next=8,y();case 8:n.data.selected&&n.data.selected.forEach((function(e){W.value.some((function(t){t.ID===e&&F.value.toggleRowSelection(t,!0)}))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e){q.value=e},Q=function(e){U.value=!0,W.value=e.menuBtn},X=function(){U.value=!1},Y=function(){var e=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=q.value.map((function(e){return e.ID})),e.next=3,k({menuID:G,selected:t,authorityId:A.row.authorityId});case 3:0===e.sent.code&&(v({type:"success",message:"设置成功"}),U.value=!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(t,n){var m=r("el-button"),p=r("el-tree"),v=r("el-table-column"),h=r("el-table"),y=r("el-dialog");return a(),u("div",null,[o("div",x,[c(m,{class:"fl-right",size:"small",type:"primary",onClick:L},{default:i((function(){return[I]})),_:1})]),c(p,{ref_key:"menuTree",ref:H,data:B.value,"default-checked-keys":S.value,props:V.value,"default-expand-all":"","highlight-current":"","node-key":"ID","show-checkbox":"",onCheck:P},{default:i((function(t){var n=t.node,r=t.data;return[o("span",R,[o("span",null,l(n.label),1),o("span",null,[c(m,{type:"text",size:"small",style:s({color:e.row.defaultRouter===r.name?"#E6A23C":"#85ce61"}),disabled:!n.checked,onClick:function(){return O(r)}},{default:i((function(){return[d(l(e.row.defaultRouter===r.name?"首页":"设为首页"),1)]})),_:2},1032,["style","disabled","onClick"])]),r.menuBtn.length?(a(),u("span",b,[c(m,{type:"text",size:"small",onClick:function(){return J(r)}},{default:i((function(){return[C]})),_:2},1032,["onClick"])])):f("",!0)])]})),_:1},8,["data","default-checked-keys","props"]),c(y,{modelValue:U.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return U.value=e}),title:"分配按钮","destroy-on-close":""},{footer:i((function(){return[o("div",_,[c(m,{size:"small",onClick:X},{default:i((function(){return[D]})),_:1}),c(m,{size:"small",type:"primary",onClick:Y},{default:i((function(){return[j]})),_:1})])]})),default:i((function(){return[c(h,{ref_key:"btnTableRef",ref:F,data:W.value,"row-key":"ID",onSelectionChange:K},{default:i((function(){return[c(v,{type:"selection",width:"55"}),c(v,{label:"按钮名称",prop:"name"}),c(v,{label:"按钮备注",prop:"desc"})]})),_:1},8,["data"])]})),_:1},8,["modelValue"])])}}}))}}}))}();
